<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="mailbox --- 様々な形式のメールボックスを操作する" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/library/mailbox.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="ソースコード: Lib/mailbox.py このモジュールでは二つのクラス Mailbox および Message をディスク上のメールボックスとそこに収められたメッセージへのアクセスと操作のために定義しています。 Mailbox は辞書のようなキーからメッセージへの対応付けを提供しています。 Message は email.message モジュールの Message を拡張して形式ごと..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="ソースコード: Lib/mailbox.py このモジュールでは二つのクラス Mailbox および Message をディスク上のメールボックスとそこに収められたメッセージへのアクセスと操作のために定義しています。 Mailbox は辞書のようなキーからメッセージへの対応付けを提供しています。 Message は email.message モジュールの Message を拡張して形式ごと..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>mailbox --- 様々な形式のメールボックスを操作する &#8212; Python 3.12.4 ドキュメント</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=80d5e7a1.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css%3Fv=bb723527.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css%3Fv=b20cc3f5.css" />
    
    <script src="../_static/documentation_options.js%3Fv=7e11ab17"></script>
    <script src="../_static/doctools.js%3Fv=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/translations.js%3Fv=4dbe4bdc"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 3.12.4 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="mimetypes --- ファイル名を MIME タイプへマップする" href="mimetypes.html" />
    <link rel="prev" title="json --- JSON エンコーダーとデコーダー" href="json.html" />
    
      <script defer data-domain="docs.python.org" src="https://plausible.io/js/script.js"></script>
    
    <link rel="canonical" href="../../../3/library/mailbox.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="stylesheet" href="../_static/pydoctheme_dark.css" media="(prefers-color-scheme: dark)" id="pydoctheme_dark_css">
    <link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script>
            <script type="text/javascript" src="../_static/search-focus.js"></script>
            <script type="text/javascript" src="../_static/themetoggle.js"></script> 
<meta name="readthedocs-addons-api-version" content="1">
<script type="text/javascript">
 function onSwitch(event) {
     const option = event.target.selectedIndex;
     const item = event.target.options[option];
     window.location.href = item.dataset.url;
 }

 document.addEventListener("readthedocs-addons-data-ready", function(event) {
   const config = event.detail.data()

   // Add some mocked hardcoded versions pointing to the official
   // documentation while migrating to Read the Docs.
   // These are only for testing purposes.
   // TODO: remove them when managing all the versions on Read the Docs,
   // since all the "active, built and not hidden" versions will be shown automatically.
   let versions = config.versions.active.concat([
       {
           slug: "dev (3.13)",
           urls: {
               documentation: "https://docs.python.org/3.13/",
           }
       },
       {
           slug: "3.12",
           urls: {
               documentation: "https://docs.python.org/3.12/",
           }
       },
       {
           slug: "3.11",
           urls: {
               documentation: "https://docs.python.org/3.11/",
           }
       },
   ]);

   const versionSelect = `
   <select id="version_select">
   ${ versions.map(
       (version) => `
       <option
           value="${ version.slug }"
           ${ config.versions.current.slug === version.slug ? 'selected="selected"' : '' }
           data-url="${ version.urls.documentation }">
           ${ version.slug }
       </option>`
   ).join("\n") }
   </select>
   `;

   // Prepend the current language to the options on the selector
   let languages = config.projects.translations.concat(config.projects.current);
   languages = languages.sort((a, b) => a.language.name.localeCompare(b.language.name));

   const languageSelect = `
   <select id="language_select">
   ${ languages.map(
       (translation) => `
       <option
           value="${ translation.slug }"
           ${ config.projects.current.slug === translation.slug ? 'selected="selected"' : '' }
           data-url="${ translation.urls.documentation }">
           ${ translation.language.name }
       </option>`
   ).join("\n") }
   </select>
   `;

   // Query all the placeholders because there are different ones for Desktop/Mobile
   const versionPlaceholders = document.querySelectorAll(".version_switcher_placeholder");
   for (placeholder of versionPlaceholders) {
       placeholder.innerHTML = versionSelect;
       let selectElement = placeholder.querySelector("select");
       selectElement.addEventListener("change", onSwitch);
   }

   const languagePlaceholders = document.querySelectorAll(".language_switcher_placeholder");
   for (placeholder of languagePlaceholders) {
       placeholder.innerHTML = languageSelect;
       let selectElement = placeholder.querySelector("select");
       selectElement.addEventListener("change", onSwitch);
   }
 });
</script>

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <nav class="nav-content" role="navigation">
        <label for="menuToggler" class="toggler__label">
            <span></span>
        </label>
        <span class="nav-items-wrapper">
            <a href="https://www.python.org/" class="nav-logo">
                <img src="../_static/py.svg" alt="Python logo"/>
            </a>
            <span class="version_switcher_placeholder"></span>
            <form role="search" class="search" action="../search.html" method="get">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                    <path fill-rule="nonzero" fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input placeholder="クイック検索" aria-label="クイック検索" type="search" name="q" />
                <input type="submit" value="検索"/>
            </form>
        </span>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
            
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label>
  <div>
    <h3><a href="../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="mailbox.html#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code> --- 様々な形式のメールボックスを操作する</a><ul>
<li><a class="reference internal" href="mailbox.html#mailbox-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> オブジェクト</a><ul>
<li><a class="reference internal" href="mailbox.html#maildir-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mbox-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mh-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#babyl-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Babyl</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mmdf-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDF</span></code> オブジェクト</a></li>
</ul>
</li>
<li><a class="reference internal" href="mailbox.html#message-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> オブジェクト</a><ul>
<li><a class="reference internal" href="mailbox.html#maildirmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mboxmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mhmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#babylmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mmdfmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> オブジェクト</a></li>
</ul>
</li>
<li><a class="reference internal" href="mailbox.html#exceptions">例外</a></li>
<li><a class="reference internal" href="mailbox.html#examples">使用例</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="json.html"
                          title="前の章へ"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> --- JSON エンコーダーとデコーダー</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="mimetypes.html"
                          title="次の章へ"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mimetypes</span></code> --- ファイル名を MIME タイプへマップする</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">バグ報告</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/library/mailbox.rst"
            rel="nofollow">ソースの表示
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="mimetypes.html" title="mimetypes --- ファイル名を MIME タイプへマップする"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="json.html" title="json --- JSON エンコーダーとデコーダー"
             accesskey="P">前へ</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" accesskey="U">インターネット上のデータの操作</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="mailbox.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code> --- 様々な形式のメールボックスを操作する</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="クイック検索" aria-label="クイック検索" type="search" name="q" id="search-box" />
          <input type="submit" value="検索" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-mailbox">
<span id="mailbox-manipulate-mailboxes-in-various-formats"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code> --- 様々な形式のメールボックスを操作する<a class="headerlink" href="mailbox.html#module-mailbox" title="Link to this heading">¶</a></h1>
<p><strong>ソースコード:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.12/Lib/mailbox.py">Lib/mailbox.py</a></p>
<hr class="docutils" />
<p>このモジュールでは二つのクラス <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> および <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> をディスク上のメールボックスとそこに収められたメッセージへのアクセスと操作のために定義しています。 <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> は辞書のようなキーからメッセージへの対応付けを提供しています。 <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> は <a class="reference internal" href="email.message.html#module-email.message" title="email.message: The base class representing email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.message</span></code></a> モジュールの <a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> を拡張して形式ごとの状態と振る舞いを追加しています。サポートされるメールボックスの形式は Maildir, mbox, MH, Babyl, MMDF です。</p>
<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference internal" href="email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> モジュール</dt><dd><p>メッセージの表現と操作。</p>
</dd>
</dl>
</div>
<section id="mailbox-objects">
<span id="id1"></span><h2><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mailbox-objects" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.Mailbox">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">Mailbox</span></span><a class="headerlink" href="mailbox.html#mailbox.Mailbox" title="Link to this definition">¶</a></dt>
<dd><p>メールボックス。内容を確認したり変更したりできます。</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> class defines an interface and is not intended to be
instantiated.  Instead, format-specific subclasses should inherit from
<code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> and your code should instantiate a particular subclass.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> interface is dictionary-like, with small keys
corresponding to messages. Keys are issued by the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance
with which they will be used and are only meaningful to that <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code>
instance. A key continues to identify a message even if the corresponding
message is modified, such as by replacing it with another message.</p>
<p>Messages may be added to a <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance using the set-like
method <a class="reference internal" href="mailbox.html#mailbox.Mailbox.add" title="mailbox.Mailbox.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a> and removed using a <code class="docutils literal notranslate"><span class="pre">del</span></code> statement or the set-like
methods <a class="reference internal" href="mailbox.html#mailbox.Mailbox.remove" title="mailbox.Mailbox.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove()</span></code></a> and <a class="reference internal" href="mailbox.html#mailbox.Mailbox.discard" title="mailbox.Mailbox.discard"><code class="xref py py-meth docutils literal notranslate"><span class="pre">discard()</span></code></a>.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> interface semantics differ from dictionary semantics in some
noteworthy ways. Each time a message is requested, a new representation
(typically a <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> instance) is generated based upon the current
state of the mailbox. Similarly, when a message is added to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance, the provided message representation's contents are
copied. In neither case is a reference to the message representation kept by
the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance.</p>
<p>The default <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a> iterates over message
representations, not keys as the default <a class="reference internal" href="stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dictionary</span></code></a>
iterator does. Moreover, modification of a
mailbox during iteration is safe and well-defined. Messages added to the
mailbox after an iterator is created will not be seen by the
iterator. Messages removed from the mailbox before the iterator yields them
will be silently skipped, though using a key from an iterator may result in a
<a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> exception if the corresponding message is subsequently
removed.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Be very cautious when modifying mailboxes that might be simultaneously
changed by some other process.  The safest mailbox format to use for such
tasks is <a class="reference internal" href="mailbox.html#mailbox.Maildir" title="mailbox.Maildir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code></a>; try to avoid using single-file formats such as
<a class="reference internal" href="mailbox.html#mailbox.mbox" title="mailbox.mbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code></a> for
concurrent writing.  If you're modifying a mailbox, you <em>must</em> lock it by
calling the <a class="reference internal" href="mailbox.html#mailbox.Mailbox.lock" title="mailbox.Mailbox.lock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lock()</span></code></a> and <a class="reference internal" href="mailbox.html#mailbox.Mailbox.unlock" title="mailbox.Mailbox.unlock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unlock()</span></code></a> methods <em>before</em> reading any
messages in the file or making any changes by adding or deleting a
message.  Failing to lock the mailbox runs the risk of losing messages or
corrupting the entire mailbox.</p>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instances have the following methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.add" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスに <em>message</em> を追加し、それに割り当てられたキーを返します。</p>
<p>引数 <em>message</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> インスタンス、 <a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">email.message.Message</span></code></a> インスタンス、文字列、バイト文字列、ファイル風オブジェクト (バイナリモードで開かれていなければなりません) を使えます。 <em>message</em> が適切な形式に特化した <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> サブクラスのインスタンス (例えばメールボックスが <a class="reference internal" href="mailbox.html#mailbox.mbox" title="mailbox.mbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code></a> インスタンスのときの <a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> インスタンス) であれば、形式ごとの情報が利用されます。そうでなければ、形式ごとに必要な情報は適当なデフォルトが使われます。</p>
<div class="versionchanged">
<p><span class="versionmodified changed">バージョン 3.2 で変更: </span>バイナリ入力のサポートが追加されました。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.remove" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Mailbox.__delitem__">
<span class="sig-name descname"><span class="pre">__delitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.__delitem__" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Mailbox.discard">
<span class="sig-name descname"><span class="pre">discard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.discard" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスから <em>key</em> に対応するメッセージを削除します。</p>
<p>対応するメッセージが無い場合、メソッドが <a class="reference internal" href="mailbox.html#mailbox.Mailbox.remove" title="mailbox.Mailbox.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove()</span></code></a> または <a class="reference internal" href="mailbox.html#mailbox.Mailbox.__delitem__" title="mailbox.Mailbox.__delitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__delitem__()</span></code></a> として呼び出されている時は <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> 例外が送出されます。しかし、 <a class="reference internal" href="mailbox.html#mailbox.Mailbox.discard" title="mailbox.Mailbox.discard"><code class="xref py py-meth docutils literal notranslate"><span class="pre">discard()</span></code></a> として呼び出されている場合は例外は発生しません。基づいているメールボックス形式が別のプロセスからの平行した変更をサポートしているならば、この <a class="reference internal" href="mailbox.html#mailbox.Mailbox.discard" title="mailbox.Mailbox.discard"><code class="xref py py-meth docutils literal notranslate"><span class="pre">discard()</span></code></a> の振る舞いの方が好まれるかもしれません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.__setitem__" title="Link to this definition">¶</a></dt>
<dd><p><em>key</em> に対応するメッセージを <em>message</em> で置き換えます。 <em>key</em> に対応しているメッセージが既に無くなっている場合 <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> 例外が送出されます。</p>
<p><a class="reference internal" href="mailbox.html#mailbox.Mailbox.add" title="mailbox.Mailbox.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a> と同様に、引数の <em>message</em> には <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> インスタンス、 <a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">email.message.Message</span></code></a> インスタンス、文字列、バイト文字列、ファイル風オブジェクト (バイナリモードで開かれていなければなりません) を使えます。 <em>message</em> が適切な形式に特化した <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> サブクラスのインスタンス (例えばメールボックスが <a class="reference internal" href="mailbox.html#mailbox.mbox" title="mailbox.mbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code></a> インスタンスのときの <a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> インスタンス) であれば、形式ごとの情報が利用されます。そうでなければ、現在 <em>key</em> に対応するメッセージの形式ごとの情報が変更されずに残ります。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.iterkeys">
<span class="sig-name descname"><span class="pre">iterkeys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.iterkeys" title="Link to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a> over all keys</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.keys" title="Link to this definition">¶</a></dt>
<dd><p>The same as <a class="reference internal" href="mailbox.html#mailbox.Mailbox.iterkeys" title="mailbox.Mailbox.iterkeys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iterkeys()</span></code></a>, except that a <a class="reference internal" href="stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> is returned
rather than an <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.itervalues">
<span class="sig-name descname"><span class="pre">itervalues</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.itervalues" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Mailbox.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.__iter__" title="Link to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a> over representations of all messages.
The messages are represented
as instances of the appropriate format-specific <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> subclass
unless a custom message factory was specified when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code>
instance was initialized.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><a class="reference internal" href="mailbox.html#mailbox.Mailbox.__iter__" title="mailbox.Mailbox.__iter__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__iter__()</span></code></a> は辞書のそれのようにキーについてのイテレータではありません。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.values">
<span class="sig-name descname"><span class="pre">values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.values" title="Link to this definition">¶</a></dt>
<dd><p>The same as <a class="reference internal" href="mailbox.html#mailbox.Mailbox.itervalues" title="mailbox.Mailbox.itervalues"><code class="xref py py-meth docutils literal notranslate"><span class="pre">itervalues()</span></code></a>, except that a <a class="reference internal" href="stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> is returned
rather than an <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.iteritems">
<span class="sig-name descname"><span class="pre">iteritems</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.iteritems" title="Link to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a> over (<em>key</em>, <em>message</em>) pairs, where <em>key</em> is
a key and <em>message</em> is a message representation. The messages are
represented as instances of the appropriate format-specific
<a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> subclass unless a custom message factory was specified
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance was initialized.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.items">
<span class="sig-name descname"><span class="pre">items</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.items" title="Link to this definition">¶</a></dt>
<dd><p>The same as <a class="reference internal" href="mailbox.html#mailbox.Mailbox.iteritems" title="mailbox.Mailbox.iteritems"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iteritems()</span></code></a>, except that a <a class="reference internal" href="stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of pairs is
returned rather than an <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a> of pairs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.get" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Mailbox.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.__getitem__" title="Link to this definition">¶</a></dt>
<dd><p>Return a representation of the message corresponding to <em>key</em>. If no such
message exists, <em>default</em> is returned if the method was called as
<a class="reference internal" href="mailbox.html#mailbox.Mailbox.get" title="mailbox.Mailbox.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> and a <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> exception is raised if the method was
called as <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code>. The message is represented as an instance
of the appropriate format-specific <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> subclass unless a
custom message factory was specified when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance
was initialized.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.get_message">
<span class="sig-name descname"><span class="pre">get_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.get_message" title="Link to this definition">¶</a></dt>
<dd><p><em>key</em> に対応するメッセージの表現を形式ごとの <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> サブクラスのインスタンスとして返します。もし対応するメッセージが存在しなければ <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> 例外が送出されます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.get_bytes">
<span class="sig-name descname"><span class="pre">get_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.get_bytes" title="Link to this definition">¶</a></dt>
<dd><p><em>key</em> に対応するメッセージのバイト列を返すか、そのようなメッセージが存在しない場合は <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> 例外を送出します。</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.2.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.get_string">
<span class="sig-name descname"><span class="pre">get_string</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.get_string" title="Link to this definition">¶</a></dt>
<dd><p><em>key</em> に対応するメッセージの文字列表現を返すか、そのようなメッセージが存在しない場合は <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> 例外を送出します。このメッセージは <a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">email.message.Message</span></code></a> を通して処理されて7ビットクリーンな表現へ変換されます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.get_file" title="Link to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../glossary.html#term-file-like-object"><span class="xref std std-term">file-like</span></a> representation of the
message corresponding to <em>key</em>,
or raise a <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> exception if no such message exists.  The
file-like object behaves as if open in binary mode.  This file should be
closed once it is no longer needed.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">バージョン 3.2 で変更: </span>The file object really is a <a class="reference internal" href="../glossary.html#term-binary-file"><span class="xref std std-term">binary file</span></a>; previously it was
incorrectly returned in text mode.  Also, the <a class="reference internal" href="../glossary.html#term-file-like-object"><span class="xref std std-term">file-like object</span></a>
now supports the <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> protocol: you can use a
<a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> statement to automatically close it.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>Unlike other representations of messages,
<a class="reference internal" href="../glossary.html#term-file-like-object"><span class="xref std std-term">file-like</span></a> representations are not
necessarily independent of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance that
created them or of the underlying mailbox.  More specific documentation
is provided by each subclass.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.__contains__" title="Link to this definition">¶</a></dt>
<dd><p><em>key</em> がメッセージに対応していれば <code class="docutils literal notranslate"><span class="pre">True</span></code> を、そうでなければ <code class="docutils literal notranslate"><span class="pre">False</span></code> を返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.__len__" title="Link to this definition">¶</a></dt>
<dd><p>メールボックス中のメッセージ数を返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.clear" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスから全てのメッセージを削除します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.pop" title="Link to this definition">¶</a></dt>
<dd><p>Return a representation of the message corresponding to <em>key</em> and delete
the message. If no such message exists, return <em>default</em>. The message is
represented as an instance of the appropriate format-specific
<a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> subclass unless a custom message factory was specified
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance was initialized.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.popitem">
<span class="sig-name descname"><span class="pre">popitem</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.popitem" title="Link to this definition">¶</a></dt>
<dd><p>Return an arbitrary (<em>key</em>, <em>message</em>) pair, where <em>key</em> is a key and
<em>message</em> is a message representation, and delete the corresponding
message. If the mailbox is empty, raise a <a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> exception. The
message is represented as an instance of the appropriate format-specific
<a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> subclass unless a custom message factory was specified
when the <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance was initialized.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.update" title="Link to this definition">¶</a></dt>
<dd><p>Parameter <em>arg</em> should be a <em>key</em>-to-<em>message</em> mapping or an iterable of
(<em>key</em>, <em>message</em>) pairs. Updates the mailbox so that, for each given
<em>key</em> and <em>message</em>, the message corresponding to <em>key</em> is set to
<em>message</em> as if by using <a class="reference internal" href="mailbox.html#mailbox.Mailbox.__setitem__" title="mailbox.Mailbox.__setitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__setitem__()</span></code></a>. As with <a class="reference internal" href="mailbox.html#mailbox.Mailbox.__setitem__" title="mailbox.Mailbox.__setitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__setitem__()</span></code></a>,
each <em>key</em> must already correspond to a message in the mailbox or else a
<a class="reference internal" href="exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> exception will be raised, so in general it is incorrect
for <em>arg</em> to be a <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>辞書と違い、キーワード引数はサポートされていません。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.flush" title="Link to this definition">¶</a></dt>
<dd><p>Write any pending changes to the filesystem. For some <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a>
subclasses, changes are always written immediately and <code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code> does
nothing, but you should still make a habit of calling this method.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.lock" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスの排他的アドバイザリロックを取得し、他のプロセスが変更しないようにします。ロックが取得できない場合 <a class="reference internal" href="mailbox.html#mailbox.ExternalClashError" title="mailbox.ExternalClashError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ExternalClashError</span></code></a> が送出されます。ロック機構はメールボックス形式によって変わります。メールボックスの内容に変更を加えるときは <em>いつも</em> ロックを掛けるべきです。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.unlock" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスのロックが存在する場合は解放します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Mailbox.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Mailbox.close" title="Link to this definition">¶</a></dt>
<dd><p>Flush the mailbox, unlock it if necessary, and close any open files. For
some <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> subclasses, this method does nothing.</p>
</dd></dl>

</dd></dl>

<section id="maildir-objects">
<span id="mailbox-maildir"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> オブジェクト<a class="headerlink" href="mailbox.html#maildir-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.Maildir">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">Maildir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir" title="Link to this definition">¶</a></dt>
<dd><p>Maildir 形式のメールボックスのための <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> のサブクラス。パラメータ <em>factory</em> は呼び出し可能オブジェクトで (バイナリモードで開かれているかのように振る舞う)ファイル風メッセージ表現を受け付けて好みの表現を返すものです。 <em>factory</em> が <code class="docutils literal notranslate"><span class="pre">None</span></code> ならば、 <a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> がデフォルトのメッセージ表現として使われます。 <em>create</em> が <code class="docutils literal notranslate"><span class="pre">True</span></code> ならばメールボックスが存在しないときには作成します。</p>
<p><em>create</em> が <code class="docutils literal notranslate"><span class="pre">True</span></code> で、パス <em>dirname</em> が存在する場合、ディレクトリレイアウトを検証せずに既存の maildir として扱います。</p>
<p><em>path</em> ではなく <em>dirname</em> と命名される歴史的な理由のためです。</p>
<p>Maildir はディレクトリ型のメールボックス形式でメール転送エージェント qmail 用に発明され、現在では多くの他のプログラムでもサポートされているものです。Maildir メールボックス中のメッセージは共通のディレクトリ構造の下で個別のファイルに保存されます。このデザインにより、Maildir メールボックスは複数の無関係のプログラムからデータを失うことなくアクセスしたり変更したりできます。そのためロックは不要です。</p>
<p>Maildir メールボックスには三つのサブディレクトリ <code class="file docutils literal notranslate"><span class="pre">tmp</span></code>, <code class="file docutils literal notranslate"><span class="pre">new</span></code>, <code class="file docutils literal notranslate"><span class="pre">cur</span></code> があります。メッセージはまず <code class="file docutils literal notranslate"><span class="pre">tmp</span></code> サブディレクトリに瞬間的に作られた後、 <code class="file docutils literal notranslate"><span class="pre">new</span></code> サブディレクトリに移動されて配送を完了します。メールユーザエージェントが引き続いて <code class="file docutils literal notranslate"><span class="pre">cur</span></code> サブディレクトリにメッセージを移動しメッセージの状態についての情報をファイル名に追加される特別な &quot;info&quot; セクションに保存することができます。</p>
<p>Folders of the style introduced by the Courier mail transfer agent are also
supported. Any subdirectory of the main mailbox is considered a folder if
<code class="docutils literal notranslate"><span class="pre">'.'</span></code> is the first character in its name. Folder names are represented by
<code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> without the leading <code class="docutils literal notranslate"><span class="pre">'.'</span></code>. Each folder is itself a Maildir
mailbox but should not contain other folders. Instead, a logical nesting is
indicated using <code class="docutils literal notranslate"><span class="pre">'.'</span></code> to delimit levels, e.g., &quot;Archived.2005.07&quot;.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mailbox.Maildir.colon">
<span class="sig-name descname"><span class="pre">colon</span></span><a class="headerlink" href="mailbox.html#mailbox.Maildir.colon" title="Link to this definition">¶</a></dt>
<dd><p>本来の Maildir 仕様ではある種のメッセージのファイル名にコロン (<code class="docutils literal notranslate"><span class="pre">':'</span></code>) を使う必要があります。しかしながら、オペレーティングシステムによってはこの文字をファイル名に含めることができないことがあります。そういった環境で Maildir のような形式を使いたい場合、代わりに使われる文字を指定する必要があります。感嘆符 (<code class="docutils literal notranslate"><span class="pre">'!'</span></code>) を使うのが一般的な選択です。以下の例を見てください:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mailbox</span>
<span class="n">mailbox</span><span class="o">.</span><span class="n">Maildir</span><span class="o">.</span><span class="n">colon</span> <span class="o">=</span> <span class="s1">&#39;!&#39;</span>
</pre></div>
</div>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">colon</span></code> attribute may also be set on a per-instance basis.</p>
</dd></dl>

<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> instances have all of the methods of <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> in
addition to the following:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.list_folders">
<span class="sig-name descname"><span class="pre">list_folders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.list_folders" title="Link to this definition">¶</a></dt>
<dd><p>全てのフォルダ名のリストを返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.get_folder">
<span class="sig-name descname"><span class="pre">get_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.get_folder" title="Link to this definition">¶</a></dt>
<dd><p>Return a <code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> instance representing the folder whose name is
<em>folder</em>. A <a class="reference internal" href="mailbox.html#mailbox.NoSuchMailboxError" title="mailbox.NoSuchMailboxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NoSuchMailboxError</span></code></a> exception is raised if the folder
does not exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.add_folder">
<span class="sig-name descname"><span class="pre">add_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.add_folder" title="Link to this definition">¶</a></dt>
<dd><p>Create a folder whose name is <em>folder</em> and return a <code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code>
instance representing it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.remove_folder">
<span class="sig-name descname"><span class="pre">remove_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.remove_folder" title="Link to this definition">¶</a></dt>
<dd><p>名前が <em>folder</em> であるフォルダを削除します。もしフォルダに一つでもメッセージが含まれていれば <a class="reference internal" href="mailbox.html#mailbox.NotEmptyError" title="mailbox.NotEmptyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotEmptyError</span></code></a> 例外が送出されフォルダは削除されません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.clean">
<span class="sig-name descname"><span class="pre">clean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.clean" title="Link to this definition">¶</a></dt>
<dd><p>過去36時間以内にアクセスされなかったメールボックス内の一時ファイルを削除します。Maildir 仕様はメールを読むプログラムはときどきこの作業をすべきだとしています。</p>
</dd></dl>

<p>Some <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> methods implemented by <code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> deserve special
remarks:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.add" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Maildir.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.__setitem__" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Maildir.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.update" title="Link to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">警告</p>
<p>これらのメソッドは一意的なファイル名をプロセスIDに基づいて生成します。複数のスレッドを使う場合は、同じメールボックスを同時に操作しないようにスレッド間で調整しておかないと検知されない名前の衝突が起こりメールボックスを壊すかもしれません。</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.flush" title="Link to this definition">¶</a></dt>
<dd><p>Maildir メールボックスへの変更は即時に適用されるので、このメソッドは何もしません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.lock" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Maildir.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.unlock" title="Link to this definition">¶</a></dt>
<dd><p>Maildir メールボックスはロックをサポート(または要求)しないので、このメソッドは何もしません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.close" title="Link to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> instances do not keep any open files and the underlying
mailboxes do not support locking, so this method does nothing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Maildir.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Maildir.get_file" title="Link to this definition">¶</a></dt>
<dd><p>ホストのプラットフォームによっては、返されたファイルが開いている間、元になったメッセージを変更したり削除したりできない場合があります。</p>
</dd></dl>

</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference external" href="https://www.courier-mta.org/maildir.html">Courier の maildir マニュアルページ</a></dt><dd><p>Maildir 形式の仕様。フォルダをサポートする一般的な拡張について記述されています。</p>
</dd>
<dt><a class="reference external" href="https://cr.yp.to/proto/maildir.html">Using maildir format</a></dt><dd><p>Maildir 形式の発明者による注意書き。更新された名前生成規則と &quot;info&quot; の解釈についても含まれます。</p>
</dd>
</dl>
</div>
</section>
<section id="mbox-objects">
<span id="mailbox-mbox"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mbox-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.mbox">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">mbox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mbox" title="Link to this definition">¶</a></dt>
<dd><p>mbox 形式のメールボックスのための <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> のサブクラス。パラメータ <em>factory</em> は呼び出し可能オブジェクトで (バイナリモードで開かれているかのように振る舞う)ファイル風メッセージ表現を受け付けて好みの表現を返すものです。 <em>factory</em> が <code class="docutils literal notranslate"><span class="pre">None</span></code> ならば、 <a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> がデフォルトのメッセージ表現として使われます。 <em>create</em> が <code class="docutils literal notranslate"><span class="pre">True</span></code> ならばメールボックスが存在しないときには作成します。</p>
<p>mbox 形式は Unixシステム上でメールを保存する古くからある形式です。mbox メールボックスでは全てのメッセージが一つのファイルに保存されておりそれぞれのメッセージは &quot;From &quot; という5文字で始まる行を先頭に付けられています。</p>
<p>Several variations of the mbox format exist to address perceived shortcomings in
the original. In the interest of compatibility, <code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code> implements the
original format, which is sometimes referred to as <em class="dfn">mboxo</em>. This means that
the <em class="mailheader">Content-Length</em> header, if present, is ignored and that any
occurrences of &quot;From &quot; at the beginning of a line in a message body are
transformed to &quot;&gt;From &quot; when storing the message, although occurrences of &quot;&gt;From
&quot; are not transformed to &quot;From &quot; when reading the message.</p>
<p>Some <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> methods implemented by <code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code> deserve special
remarks:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mbox.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mbox.get_file" title="Link to this definition">¶</a></dt>
<dd><p>Using the file after calling <a class="reference internal" href="mailbox.html#mailbox.Mailbox.flush" title="mailbox.Mailbox.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> or
<a class="reference internal" href="mailbox.html#mailbox.Mailbox.close" title="mailbox.Mailbox.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> on the <code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code> instance may yield
unpredictable results or raise an exception.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mbox.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mbox.lock" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.mbox.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mbox.unlock" title="Link to this definition">¶</a></dt>
<dd><p>Three locking mechanisms are used---dot locking and, if available, the
<code class="xref c c-func docutils literal notranslate"><span class="pre">flock()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">lockf()</span></code> system calls.</p>
</dd></dl>

</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference external" href="http://www.tin.org/bin/man.cgi?section=5&amp;topic=mbox">tin の mbox マニュアルページ</a></dt><dd><p>mbox 形式の仕様でロックについての詳細を含む。</p>
</dd>
<dt><a class="reference external" href="https://www.jwz.org/doc/content-length.html">Configuring Netscape Mail on Unix: Why The Content-Length Format is Bad</a></dt><dd><p>バリエーションの一つではなくオリジナルの mbox を使う理由。</p>
</dd>
<dt><a class="reference external" href="https://www.loc.gov/preservation/digital/formats/fdd/fdd000383.shtml">&quot;mbox&quot; は相互に互換性を持たないいくつかのメールボックスフォーマットの集まりです</a></dt><dd><p>mbox バリエーションの歴史。</p>
</dd>
</dl>
</div>
</section>
<section id="mh-objects">
<span id="mailbox-mh"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mh-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.MH">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">MH</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH" title="Link to this definition">¶</a></dt>
<dd><p>MH 形式のメールボックスのための <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> のサブクラス。パラメータ <em>factory</em> は呼び出し可能オブジェクトで (バイナリモードで開かれているかのように振る舞う)ファイル風メッセージ表現を受け付けて好みの表現を返すものです。 <em>factory</em> が <code class="docutils literal notranslate"><span class="pre">None</span></code> ならば、 <a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> がデフォルトのメッセージ表現として使われます。 <em>create</em> が <code class="docutils literal notranslate"><span class="pre">True</span></code> ならばメールボックスが存在しないときには作成します。</p>
<p>MH はディレクトリに基づいたメールボックス形式で MH Message Handling System というメールユーザエージェントのために発明されました。 MH メールボックス中のそれぞれのメッセージは一つのファイルとして収められています。 MH メールボックスにはメッセージの他に別の MH メールボックス (<em class="dfn">フォルダ</em> と呼ばれます)を含んでもかまいません。フォルダは無限にネストできます。 MH メールボックスにはもう一つ <em class="dfn">シーケンス</em> という名前付きのリストでメッセージをサブフォルダに移動することなく論理的に分類するものがサポートされています。シーケンスは各フォルダの <code class="file docutils literal notranslate"><span class="pre">.mh_sequences</span></code> というファイルで定義されます。</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> class manipulates MH mailboxes, but it does not attempt to
emulate all of <strong class="program">mh</strong>'s behaviors. In particular, it does not modify
and is not affected by the <code class="file docutils literal notranslate"><span class="pre">context</span></code> or <code class="file docutils literal notranslate"><span class="pre">.mh_profile</span></code> files that
are used by <strong class="program">mh</strong> to store its state and configuration.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> instances have all of the methods of <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> in addition
to the following:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.list_folders">
<span class="sig-name descname"><span class="pre">list_folders</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.list_folders" title="Link to this definition">¶</a></dt>
<dd><p>全てのフォルダ名のリストを返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.get_folder">
<span class="sig-name descname"><span class="pre">get_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.get_folder" title="Link to this definition">¶</a></dt>
<dd><p>Return an <code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> instance representing the folder whose name is
<em>folder</em>. A <a class="reference internal" href="mailbox.html#mailbox.NoSuchMailboxError" title="mailbox.NoSuchMailboxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NoSuchMailboxError</span></code></a> exception is raised if the folder
does not exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.add_folder">
<span class="sig-name descname"><span class="pre">add_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.add_folder" title="Link to this definition">¶</a></dt>
<dd><p>Create a folder whose name is <em>folder</em> and return an <code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> instance
representing it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.remove_folder">
<span class="sig-name descname"><span class="pre">remove_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.remove_folder" title="Link to this definition">¶</a></dt>
<dd><p>名前が <em>folder</em> であるフォルダを削除します。もしフォルダに一つでもメッセージが含まれていれば <a class="reference internal" href="mailbox.html#mailbox.NotEmptyError" title="mailbox.NotEmptyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotEmptyError</span></code></a> 例外が送出されフォルダは削除されません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.get_sequences">
<span class="sig-name descname"><span class="pre">get_sequences</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.get_sequences" title="Link to this definition">¶</a></dt>
<dd><p><em>folder</em> という名前のフォルダを削除します。フォルダにメッセージが一つでも残っていれば、<a class="reference internal" href="mailbox.html#mailbox.NotEmptyError" title="mailbox.NotEmptyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotEmptyError</span></code></a> 例外が送出されフォルダは削除されません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.set_sequences">
<span class="sig-name descname"><span class="pre">set_sequences</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequences</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.set_sequences" title="Link to this definition">¶</a></dt>
<dd><p>シーケンス名をキーのリストに対応付ける辞書を返します。シーケンスが一つもなければ空の辞書を返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.pack">
<span class="sig-name descname"><span class="pre">pack</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.pack" title="Link to this definition">¶</a></dt>
<dd><p>メールボックス中のシーケンスを <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_sequences()</span></code> で返されるような名前とキーのリストを対応付ける辞書 <em>sequences</em> に基づいて再定義します。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>番号付けの間隔を詰める必要に応じてメールボックス中のメッセージの名前を付け替えます。シーケンスのリストのエントリもそれに応じて更新されます。</p>
</div>
</dd></dl>

<p>Some <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> methods implemented by <code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> deserve special
remarks:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.remove" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.MH.__delitem__">
<span class="sig-name descname"><span class="pre">__delitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.__delitem__" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.MH.discard">
<span class="sig-name descname"><span class="pre">discard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.discard" title="Link to this definition">¶</a></dt>
<dd><p>これらのメソッドはメッセージを直ちに削除します。名前の前にコンマを付加してメッセージに削除の印を付けるという MH の規約は使いません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.lock" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.MH.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.unlock" title="Link to this definition">¶</a></dt>
<dd><p>Three locking mechanisms are used---dot locking and, if available, the
<code class="xref c c-func docutils literal notranslate"><span class="pre">flock()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">lockf()</span></code> system calls. For MH mailboxes, locking
the mailbox means locking the <code class="file docutils literal notranslate"><span class="pre">.mh_sequences</span></code> file and, only for the
duration of any operations that affect them, locking individual message
files.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.get_file" title="Link to this definition">¶</a></dt>
<dd><p>ホストプラットフォームにより、ファイルが開かれたままの場合はメッセージを削除することができない場合があります。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.flush" title="Link to this definition">¶</a></dt>
<dd><p>MH メールボックスへの変更は即時に適用されますのでこのメソッドは何もしません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MH.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MH.close" title="Link to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> instances do not keep any open files, so this method is
equivalent to <a class="reference internal" href="mailbox.html#mailbox.MH.unlock" title="mailbox.MH.unlock"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unlock()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference external" href="https://www.nongnu.org/nmh/">nmh - Message Handling System</a></dt><dd><p><strong class="program">mh</strong> の改良版である <strong class="program">nmh</strong> のホームページ。</p>
</dd>
<dt><a class="reference external" href="https://rand-mh.sourceforge.io/book/">MH &amp; nmh: Email for Users &amp; Programmers</a></dt><dd><p>GPLライセンスの <strong class="program">mh</strong> および <strong class="program">nmh</strong> の本で、このメールボックス形式についての情報があります。</p>
</dd>
</dl>
</div>
</section>
<section id="babyl-objects">
<span id="mailbox-babyl"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">Babyl</span></code> オブジェクト<a class="headerlink" href="mailbox.html#babyl-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.Babyl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">Babyl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Babyl" title="Link to this definition">¶</a></dt>
<dd><p>Babyl 形式のメールボックスのための <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> のサブクラス。パラメータ <em>factory</em> は呼び出し可能オブジェクトで (バイナリモードで開かれているかのように振る舞う)ファイル風メッセージ表現を受け付けて好みの表現を返すものです。 <em>factory</em> が <code class="docutils literal notranslate"><span class="pre">None</span></code> ならば、 <a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> がデフォルトのメッセージ表現として使われます。 <em>create</em> が <code class="docutils literal notranslate"><span class="pre">True</span></code> ならばメールボックスが存在しないときには作成します。</p>
<p>Babyl は単一ファイルのメールボックス形式で Emacs に付属している Rmail メールユーザエージェントで使われているものです。メッセージの開始は Control-Underscore (<code class="docutils literal notranslate"><span class="pre">'\037'</span></code>) および Control-L (<code class="docutils literal notranslate"><span class="pre">'\014'</span></code>) の二文字を含む行で示されます。メッセージの終了は次のメッセージの開始または最後のメッセージの場合には Control-Underscore を含む行で示されます。</p>
<p>Babyl メールボックス中のメッセージには二つのヘッダのセット、オリジナルヘッダといわゆる可視ヘッダ、があります。可視ヘッダは典型的にはオリジナルヘッダの一部を分り易いように再整形したり短くしたりしたものです。 Babyl メールボックス中のそれぞれのメッセージには <em class="dfn">ラベル</em> というそのメッセージについての追加情報を記録する短い文字列のリストを伴い、メールボックス中に見出されるユーザが定義した全てのラベルのリストは Babyl オプションセクションに保持されます。</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Babyl</span></code> instances have all of the methods of <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> in
addition to the following:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Babyl.get_labels">
<span class="sig-name descname"><span class="pre">get_labels</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Babyl.get_labels" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスで使われているユーザが定義した全てのラベルのリストを返します。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>メールボックスにどのようなラベルが存在するかを決めるのに、Babyl オプションセクションのリストを参考にせず、実際のメッセージを捜索しますが、Babyl セクションもメールボックスが変更されたときにはいつでも更新されます。</p>
</div>
</dd></dl>

<p>Some <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> methods implemented by <code class="xref py py-class docutils literal notranslate"><span class="pre">Babyl</span></code> deserve special
remarks:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Babyl.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Babyl.get_file" title="Link to this definition">¶</a></dt>
<dd><p>Babyl メールボックスにおいて、メッセージのヘッダはボディと繋がって格納されていません。ファイル風の表現を生成するために、ヘッダとボディがファイルと同じ API を持つ <a class="reference internal" href="io.html#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BytesIO</span></code></a> インスタンスに一緒にコピーされます。その結果、ファイル風オブジェクトは元にしているメールボックスとは真に独立していますが、文字列表現と比べてメモリーを節約することにはなりません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.Babyl.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Babyl.lock" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.Babyl.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Babyl.unlock" title="Link to this definition">¶</a></dt>
<dd><p>Three locking mechanisms are used---dot locking and, if available, the
<code class="xref c c-func docutils literal notranslate"><span class="pre">flock()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">lockf()</span></code> system calls.</p>
</dd></dl>

</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference external" href="https://quimby.gnus.org/notes/BABYL">Format of Version 5 Babyl Files</a></dt><dd><p>Babyl 形式の仕様。</p>
</dd>
<dt><a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Rmail.html">Reading Mail with Rmail</a></dt><dd><p>Rmail のマニュアルで Babyl のセマンティクスについての情報も少しある。</p>
</dd>
</dl>
</div>
</section>
<section id="mmdf-objects">
<span id="mailbox-mmdf"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDF</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mmdf-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.MMDF">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">MMDF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDF" title="Link to this definition">¶</a></dt>
<dd><p>MMDF 形式のメールボックスのための <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> のサブクラス。パラメータ <em>factory</em> は呼び出し可能オブジェクトで (バイナリモードで開かれているかのように振る舞う)ファイル風メッセージ表現を受け付けて好みの表現を返すものです。 <em>factory</em> が <code class="docutils literal notranslate"><span class="pre">None</span></code> ならば、 <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> がデフォルトのメッセージ表現として使われます。 <em>create</em> が <code class="docutils literal notranslate"><span class="pre">True</span></code> ならばメールボックスが存在しないときには作成します。</p>
<p>MMDF は単一ファイルのメールボックス形式で Multichannel Memorandum Distribution Facility というメール転送エージェント用に発明されたものです。各メッセージは mbox と同様の形式で収められますが、前後を4つの Control-A (<code class="docutils literal notranslate"><span class="pre">'\001'</span></code>) を含む行で挟んであります。mbox 形式と同じようにそれぞれのメッセージの開始は &quot;From &quot; の5文字を含む行で示されますが、それ以外の場所での &quot;From &quot; は格納の際 &quot;&gt;From &quot; には変えられません。それは追加されたメッセージ区切りによって新たなメッセージの開始と見間違うことが避けられるからです。</p>
<p>Some <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> methods implemented by <code class="xref py py-class docutils literal notranslate"><span class="pre">MMDF</span></code> deserve special
remarks:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDF.get_file">
<span class="sig-name descname"><span class="pre">get_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDF.get_file" title="Link to this definition">¶</a></dt>
<dd><p>Using the file after calling <a class="reference internal" href="mailbox.html#mailbox.Mailbox.flush" title="mailbox.Mailbox.flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">flush()</span></code></a> or
<a class="reference internal" href="mailbox.html#mailbox.Mailbox.close" title="mailbox.Mailbox.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> on the <code class="xref py py-class docutils literal notranslate"><span class="pre">MMDF</span></code> instance may yield
unpredictable results or raise an exception.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDF.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDF.lock" title="Link to this definition">¶</a></dt>
<dt class="sig sig-object py" id="mailbox.MMDF.unlock">
<span class="sig-name descname"><span class="pre">unlock</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDF.unlock" title="Link to this definition">¶</a></dt>
<dd><p>Three locking mechanisms are used---dot locking and, if available, the
<code class="xref c c-func docutils literal notranslate"><span class="pre">flock()</span></code> and <code class="xref c c-func docutils literal notranslate"><span class="pre">lockf()</span></code> system calls.</p>
</dd></dl>

</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference external" href="http://www.tin.org/bin/man.cgi?section=5&amp;topic=mmdf">mmdf man page from tin</a></dt><dd><p>ニュースリーダ tin のドキュメント中の MMDF 形式仕様。</p>
</dd>
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/MMDF">MMDF</a></dt><dd><p>Multichannel Memorandum Distribution Facility についてのウィキペディアの記事。</p>
</dd>
</dl>
</div>
</section>
</section>
<section id="message-objects">
<span id="mailbox-message-objects"></span><h2><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> オブジェクト<a class="headerlink" href="mailbox.html#message-objects" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.Message">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">Message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.Message" title="Link to this definition">¶</a></dt>
<dd><p>A subclass of the <a class="reference internal" href="email.message.html#module-email.message" title="email.message: The base class representing email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.message</span></code></a> module's
<a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>. Subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">mailbox.Message</span></code> add
mailbox-format-specific state and behavior.</p>
<p>If <em>message</em> is omitted, the new instance is created in a default, empty state.
If <em>message</em> is an <a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">email.message.Message</span></code></a> instance, its contents are
copied; furthermore, any format-specific information is converted insofar as
possible if <em>message</em> is a <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instance. If <em>message</em> is a string,
a byte string,
or a file, it should contain an <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2822.html"><strong>RFC 2822</strong></a>-compliant message, which is read
and parsed.  Files should be open in binary mode, but text mode files
are accepted for backward compatibility.</p>
<p>サブクラスにより提供される形式ごとの状態と動作は様々ですが、一般に或るメールボックスに固有のものでないプロパティだけがサポートされます(おそらくプロパティのセットはメールボックス形式ごとに固有でしょうが)。例えば、単一ファイルメールボックス形式におけるファイルオフセットやディレクトリ式メールボックス形式におけるファイル名は保持されません、というのもそれらは元々のメールボックスにしか適用できないからです。しかし、メッセージがユーザに読まれたかどうかあるいは重要だとマークされたかどうかという状態は保持されます、というのはそれらはメッセージ自体に適用されるからです。</p>
<p>There is no requirement that <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instances be used to represent
messages retrieved using <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> instances. In some situations, the
time and memory required to generate <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> representations might
not be acceptable. For such situations, <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instances also
offer string and file-like representations, and a custom message factory may
be specified when a <code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> instance is initialized.</p>
</dd></dl>

<section id="maildirmessage-objects">
<span id="mailbox-maildirmessage"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> オブジェクト<a class="headerlink" href="mailbox.html#maildirmessage-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.MaildirMessage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">MaildirMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage" title="Link to this definition">¶</a></dt>
<dd><p>Maildir 固有の動作をするメッセージ。引数 <em>message</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> のコンストラクタと同じ意味を持ちます。</p>
<p>通常、メールユーザエージェントは <code class="file docutils literal notranslate"><span class="pre">new</span></code> サブディレクトリにある全てのメッセージをユーザが最初にメールボックスを開くか閉じるかした後で <code class="file docutils literal notranslate"><span class="pre">cur</span></code> サブディレクトリに移動し、メッセージが実際に読まれたかどうかを記録します。 <code class="file docutils literal notranslate"><span class="pre">cur</span></code> にある各メッセージには状態情報を保存するファイル名に付け加えられた &quot;info&quot; セクションがあります。(メールリーダの中には &quot;info&quot; セクションを <code class="file docutils literal notranslate"><span class="pre">new</span></code> にあるメッセージに付けることもあります。) &quot;info&quot; セクションには二つの形式があります。一つは &quot;2,&quot; の後に標準化されたフラグのリストを付けたもの (たとえば &quot;2,FR&quot;)、もう一つは &quot;1,&quot; の後にいわゆる実験的情報を付け加えるものです。 Maildir の標準的なフラグは以下の通りです:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>意味</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>D</p></td>
<td><p>ドラフト(Draft)</p></td>
<td><p>作成中</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>フラグ付き(Flagged)</p></td>
<td><p>重要とされたもの</p></td>
</tr>
<tr class="row-even"><td><p>P</p></td>
<td><p>通過(Passed)</p></td>
<td><p>転送、再送またはバウンス</p></td>
</tr>
<tr class="row-odd"><td><p>R</p></td>
<td><p>返答済み(Replied)</p></td>
<td><p>返答されたもの</p></td>
</tr>
<tr class="row-even"><td><p>S</p></td>
<td><p>既読(Seen)</p></td>
<td><p>読んだもの</p></td>
</tr>
<tr class="row-odd"><td><p>T</p></td>
<td><p>ごみ(Trashed)</p></td>
<td><p>削除予定とされたもの</p></td>
</tr>
</tbody>
</table>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> instances offer the following methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.get_subdir">
<span class="sig-name descname"><span class="pre">get_subdir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.get_subdir" title="Link to this definition">¶</a></dt>
<dd><p>&quot;new&quot; (メッセージが <code class="file docutils literal notranslate"><span class="pre">new</span></code> サブディレクトリに保存されるべき場合) または &quot;cur&quot; (メッセージが <code class="file docutils literal notranslate"><span class="pre">cur</span></code> サブディレクトリに保存されるべき場合)のどちらかを返します。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>A message is typically moved from <code class="file docutils literal notranslate"><span class="pre">new</span></code> to <code class="file docutils literal notranslate"><span class="pre">cur</span></code> after its
mailbox has been accessed, whether or not the message is has been
read. A message <code class="docutils literal notranslate"><span class="pre">msg</span></code> has been read if <code class="docutils literal notranslate"><span class="pre">&quot;S&quot;</span> <span class="pre">in</span> <span class="pre">msg.get_flags()</span></code> is
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.set_subdir">
<span class="sig-name descname"><span class="pre">set_subdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subdir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.set_subdir" title="Link to this definition">¶</a></dt>
<dd><p>メッセージが保存されるべきサブディレクトリをセットします。パラメータ <em>subdir</em> は &quot;new&quot; または &quot;cur&quot; のいずれかでなければなりません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.get_flags">
<span class="sig-name descname"><span class="pre">get_flags</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.get_flags" title="Link to this definition">¶</a></dt>
<dd><p>現在セットされているフラグを特定する文字列を返します。メッセージが標準 Maildir 形式に準拠しているならば、結果はアルファベット順に並べられたゼロまたは1回の <code class="docutils literal notranslate"><span class="pre">'D'</span></code>、<code class="docutils literal notranslate"><span class="pre">'F'</span></code>、<code class="docutils literal notranslate"><span class="pre">'P'</span></code>、<code class="docutils literal notranslate"><span class="pre">'R'</span></code>、<code class="docutils literal notranslate"><span class="pre">'S'</span></code>、<code class="docutils literal notranslate"><span class="pre">'T'</span></code> をつなげたものです。空文字列が返されるのはフラグが一つもない場合、または &quot;info&quot; が実験的セマンティクスを使っている場合です。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.set_flags">
<span class="sig-name descname"><span class="pre">set_flags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.set_flags" title="Link to this definition">¶</a></dt>
<dd><p><em>flags</em> で指定されたフラグをセットし、他のフラグは下ろします。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.add_flag">
<span class="sig-name descname"><span class="pre">add_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.add_flag" title="Link to this definition">¶</a></dt>
<dd><p><em>flag</em> で指定されたフラグをセットしますが他のフラグは変えません。一度に二つ以上のフラグをセットすることは、<em>flag</em> に2文字以上の文字列を指定すればできます。現在の &quot;info&quot; はフラグの代わりに実験的情報を使っていても上書きされます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.remove_flag">
<span class="sig-name descname"><span class="pre">remove_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.remove_flag" title="Link to this definition">¶</a></dt>
<dd><p><em>flag</em> で指定されたフラグを下ろしますが他のフラグは変えません。一度に二つ以上のフラグを取り除くことは、<em>flag</em> に2文字以上の文字列を指定すればできます。&quot;info&quot; がフラグの代わりに実験的情報を使っている場合は現在の &quot;info&quot; は書き換えられません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.get_date">
<span class="sig-name descname"><span class="pre">get_date</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.get_date" title="Link to this definition">¶</a></dt>
<dd><p>メッセージの配送日時をエポックからの秒数を表わす浮動小数点数で返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.set_date">
<span class="sig-name descname"><span class="pre">set_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.set_date" title="Link to this definition">¶</a></dt>
<dd><p>メッセージの配送日時を <em>date</em> にセットします。<em>date</em> はエポックからの秒数を表わす浮動小数点数です。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.get_info">
<span class="sig-name descname"><span class="pre">get_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.get_info" title="Link to this definition">¶</a></dt>
<dd><p>メッセージの &quot;info&quot; を含む文字列を返します。このメソッドは実験的 (即ちフラグのリストでない) &quot;info&quot; にアクセスし、また変更するのに役立ちます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MaildirMessage.set_info">
<span class="sig-name descname"><span class="pre">set_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MaildirMessage.set_info" title="Link to this definition">¶</a></dt>
<dd><p>&quot;info&quot; に文字列 <em>info</em> をセットします。</p>
</dd></dl>

</dd></dl>

<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> or <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> instance, the <em class="mailheader">Status</em>
and <em class="mailheader">X-Status</em> headers are omitted and the following conversions
take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> または <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;cur&quot; サブディレクトリ</p></td>
<td><p>O フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>F フラグ</p></td>
<td><p>F フラグ</p></td>
</tr>
<tr class="row-even"><td><p>R フラグ</p></td>
<td><p>A フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>S フラグ</p></td>
<td><p>R フラグ</p></td>
</tr>
<tr class="row-even"><td><p>T フラグ</p></td>
<td><p>D フラグ</p></td>
</tr>
</tbody>
</table>
<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;cur&quot; サブディレクトリ</p></td>
<td><p>&quot;unseen&quot; シーケンス</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;cur&quot; サブディレクトリおよび S フラグ</p></td>
<td><p>&quot;unseen&quot; シーケンス無し</p></td>
</tr>
<tr class="row-even"><td><p>F フラグ</p></td>
<td><p>&quot;flagged&quot; シーケンス</p></td>
</tr>
<tr class="row-odd"><td><p>R フラグ</p></td>
<td><p>&quot;replied&quot; シーケンス</p></td>
</tr>
</tbody>
</table>
<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;cur&quot; サブディレクトリ</p></td>
<td><p>&quot;unseen&quot; ラベル</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;cur&quot; サブディレクトリおよび S フラグ</p></td>
<td><p>&quot;unseen&quot; ラベル無し</p></td>
</tr>
<tr class="row-even"><td><p>P フラグ</p></td>
<td><p>&quot;forwarded&quot; または &quot;resent&quot; ラベル</p></td>
</tr>
<tr class="row-odd"><td><p>R フラグ</p></td>
<td><p>&quot;answered&quot; ラベル</p></td>
</tr>
<tr class="row-even"><td><p>T フラグ</p></td>
<td><p>&quot;deleted&quot; ラベル</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mboxmessage-objects">
<span id="mailbox-mboxmessage"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mboxmessage-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.mboxMessage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">mboxMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage" title="Link to this definition">¶</a></dt>
<dd><p>mbox 固有の動作をするメッセージ。引数 <em>message</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> のコンストラクタと同じ意味を持ちます。</p>
<p>mbox メールボックス中のメッセージは単一ファイルにまとめて格納されています。送り主のエンベロープアドレスおよび配送日時は通常メッセージの開始を示す &quot;From &quot; から始まる行に記録されますが、正確なフォーマットに関しては mbox の実装ごとに大きな違いがあります。メッセージの状態を示すフラグ、たとえば読んだかどうかあるいは重要だとマークを付けられているかどうかといったようなもの、は典型的には <em class="mailheader">Status</em> および <em class="mailheader">X-Status</em> に収められます。</p>
<p>規定されている mbox メッセージのフラグは以下の通りです:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>意味</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R</p></td>
<td><p>読んだもの</p></td>
<td><p>読んだもの</p></td>
</tr>
<tr class="row-odd"><td><p>O</p></td>
<td><p>古い(Old)</p></td>
<td><p>以前に MUA に発見された</p></td>
</tr>
<tr class="row-even"><td><p>D</p></td>
<td><p>削除(Deleted)</p></td>
<td><p>削除予定とされたもの</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>フラグ付き(Flagged)</p></td>
<td><p>重要とされたもの</p></td>
</tr>
<tr class="row-even"><td><p>A</p></td>
<td><p>返答済み(Answered)</p></td>
<td><p>返答されたもの</p></td>
</tr>
</tbody>
</table>
<p>&quot;R&quot; および &quot;O&quot; フラグは <em class="mailheader">Status</em> ヘッダに記録され、 &quot;D&quot;、&quot;F&quot;、&quot;A&quot; フラグは <em class="mailheader">X-Status</em> ヘッダに記録されます。フラグとヘッダは通常記述された順番に出現します。</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> instances offer the following methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mboxMessage.get_from">
<span class="sig-name descname"><span class="pre">get_from</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage.get_from" title="Link to this definition">¶</a></dt>
<dd><p>mbox メールボックスのメッセージの開始を示す &quot;From &quot; 行を表わす文字列を返します。先頭の &quot;From &quot; および末尾の改行は含まれません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mboxMessage.set_from">
<span class="sig-name descname"><span class="pre">set_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage.set_from" title="Link to this definition">¶</a></dt>
<dd><p>Set the &quot;From &quot; line to <em>from_</em>, which should be specified without a
leading &quot;From &quot; or trailing newline. For convenience, <em>time_</em> may be
specified and will be formatted appropriately and appended to <em>from_</em>. If
<em>time_</em> is specified, it should be a <a class="reference internal" href="time.html#time.struct_time" title="time.struct_time"><code class="xref py py-class docutils literal notranslate"><span class="pre">time.struct_time</span></code></a> instance, a
tuple suitable for passing to <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>, or <code class="docutils literal notranslate"><span class="pre">True</span></code> (to use
<a class="reference internal" href="time.html#time.gmtime" title="time.gmtime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.gmtime()</span></code></a>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mboxMessage.get_flags">
<span class="sig-name descname"><span class="pre">get_flags</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage.get_flags" title="Link to this definition">¶</a></dt>
<dd><p>現在セットされているフラグを特定する文字列を返します。メッセージが規定された形式に準拠しているならば、結果は次の順に並べられた 0回か1回の <code class="docutils literal notranslate"><span class="pre">'R'</span></code>、<code class="docutils literal notranslate"><span class="pre">'O'</span></code>、<code class="docutils literal notranslate"><span class="pre">'D'</span></code>、<code class="docutils literal notranslate"><span class="pre">'F'</span></code>、<code class="docutils literal notranslate"><span class="pre">'A'</span></code> です。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mboxMessage.set_flags">
<span class="sig-name descname"><span class="pre">set_flags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage.set_flags" title="Link to this definition">¶</a></dt>
<dd><p><em>flags</em> で指定されたフラグをセットして、他のフラグは下ろします。<em>flags</em> は並べられたゼロまたは1回の <code class="docutils literal notranslate"><span class="pre">'R'</span></code>、<code class="docutils literal notranslate"><span class="pre">'O'</span></code>、<code class="docutils literal notranslate"><span class="pre">'D'</span></code>、<code class="docutils literal notranslate"><span class="pre">'F'</span></code>、<code class="docutils literal notranslate"><span class="pre">'A'</span></code> です。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mboxMessage.add_flag">
<span class="sig-name descname"><span class="pre">add_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage.add_flag" title="Link to this definition">¶</a></dt>
<dd><p><em>flag</em> で指定されたフラグをセットしますが他のフラグは変えません。一度に二つ以上のフラグをセットすることは、<em>flag</em> に2文字以上の文字列を指定すればできます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.mboxMessage.remove_flag">
<span class="sig-name descname"><span class="pre">remove_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.mboxMessage.remove_flag" title="Link to this definition">¶</a></dt>
<dd><p><em>flag</em> で指定されたフラグを下ろしますが他のフラグは変えません。一二つ以上のフラグを取り除くことは、<em>flag</em> に2文字以上の文字列を指定すればできます。</p>
</dd></dl>

</dd></dl>

<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> instance, a &quot;From &quot; line is generated based upon the
<a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> instance's delivery date, and the following conversions
take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグ</p></td>
<td><p>S フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>&quot;cur&quot; サブディレクトリ</p></td>
</tr>
<tr class="row-even"><td><p>D フラグ</p></td>
<td><p>T フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>F フラグ</p></td>
<td><p>F フラグ</p></td>
</tr>
<tr class="row-even"><td><p>A フラグ</p></td>
<td><p>R フラグ</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグおよび O フラグ</p></td>
<td><p>&quot;unseen&quot; シーケンス無し</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>&quot;unseen&quot; シーケンス</p></td>
</tr>
<tr class="row-even"><td><p>F フラグ</p></td>
<td><p>&quot;flagged&quot; シーケンス</p></td>
</tr>
<tr class="row-odd"><td><p>A フラグ</p></td>
<td><p>&quot;replied&quot; シーケンス</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグおよび O フラグ</p></td>
<td><p>&quot;unseen&quot; ラベル無し</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>&quot;unseen&quot; ラベル</p></td>
</tr>
<tr class="row-even"><td><p>D フラグ</p></td>
<td><p>&quot;deleted&quot; ラベル</p></td>
</tr>
<tr class="row-odd"><td><p>A フラグ</p></td>
<td><p>&quot;answered&quot; ラベル</p></td>
</tr>
</tbody>
</table>
<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a>
instance, the &quot;From &quot; line is copied and all flags directly correspond:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグ</p></td>
<td><p>R フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>O フラグ</p></td>
</tr>
<tr class="row-even"><td><p>D フラグ</p></td>
<td><p>D フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>F フラグ</p></td>
<td><p>F フラグ</p></td>
</tr>
<tr class="row-even"><td><p>A フラグ</p></td>
<td><p>A フラグ</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mhmessage-objects">
<span id="mailbox-mhmessage"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mhmessage-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.MHMessage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">MHMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MHMessage" title="Link to this definition">¶</a></dt>
<dd><p>MH 固有の動作をするメッセージ。引数 <em>message</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> のコンストラクタと同じ意味を持ちます。</p>
<p>MH メッセージは伝統的な意味あいにおいてマークやフラグをサポートしません。しかし、MH メッセージにはシーケンスがあり任意のメッセージを論理的にグループ分けできます。いくつかのメールソフト(標準の <strong class="program">mh</strong> や <strong class="program">nmh</strong> はそうではありませんが) は他の形式におけるフラグとほぼ同じようにシーケンスを使います:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>シーケンス</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>unseen</p></td>
<td><p>読んではいないが既にMUAに見つけられている</p></td>
</tr>
<tr class="row-odd"><td><p>replied</p></td>
<td><p>返答されたもの</p></td>
</tr>
<tr class="row-even"><td><p>flagged</p></td>
<td><p>重要とされたもの</p></td>
</tr>
</tbody>
</table>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> instances offer the following methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MHMessage.get_sequences">
<span class="sig-name descname"><span class="pre">get_sequences</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MHMessage.get_sequences" title="Link to this definition">¶</a></dt>
<dd><p>このメッセージを含むシーケンスの名前のリストを返す。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MHMessage.set_sequences">
<span class="sig-name descname"><span class="pre">set_sequences</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequences</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MHMessage.set_sequences" title="Link to this definition">¶</a></dt>
<dd><p>このメッセージを含むシーケンスのリストをセットする。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MHMessage.add_sequence">
<span class="sig-name descname"><span class="pre">add_sequence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequence</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MHMessage.add_sequence" title="Link to this definition">¶</a></dt>
<dd><p><em>sequence</em> をこのメッセージを含むシーケンスのリストに追加する。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MHMessage.remove_sequence">
<span class="sig-name descname"><span class="pre">remove_sequence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sequence</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MHMessage.remove_sequence" title="Link to this definition">¶</a></dt>
<dd><p><em>sequence</em> をこのメッセージを含むシーケンスのリストから除く。</p>
</dd></dl>

</dd></dl>

<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;unseen&quot; シーケンス</p></td>
<td><p>S フラグ無し</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;replied&quot; シーケンス</p></td>
<td><p>R フラグ</p></td>
</tr>
<tr class="row-even"><td><p>&quot;flagged&quot; シーケンス</p></td>
<td><p>F フラグ</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> or <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> instance, the <em class="mailheader">Status</em>
and <em class="mailheader">X-Status</em> headers are omitted and the following conversions
take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> または <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;unseen&quot; シーケンス</p></td>
<td><p>R フラグ無し</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;replied&quot; シーケンス</p></td>
<td><p>A フラグ</p></td>
</tr>
<tr class="row-even"><td><p>&quot;flagged&quot; シーケンス</p></td>
<td><p>F フラグ</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;unseen&quot; シーケンス</p></td>
<td><p>&quot;unseen&quot; ラベル</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;replied&quot; シーケンス</p></td>
<td><p>&quot;answered&quot; ラベル</p></td>
</tr>
</tbody>
</table>
</section>
<section id="babylmessage-objects">
<span id="mailbox-babylmessage"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> オブジェクト<a class="headerlink" href="mailbox.html#babylmessage-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.BabylMessage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">BabylMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage" title="Link to this definition">¶</a></dt>
<dd><p>Babyl 固有の動作をするメッセージ。引数 <em>message</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> のコンストラクタと同じ意味を持ちます。</p>
<p>ある種のメッセージラベルは <em class="dfn">アトリビュート</em> と呼ばれ、規約により特別な意味が与えられています。アトリビュートは以下の通りです:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>ラベル</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>unseen</p></td>
<td><p>読んではいないが既にMUAに見つけられている</p></td>
</tr>
<tr class="row-odd"><td><p>deleted</p></td>
<td><p>削除予定とされたもの</p></td>
</tr>
<tr class="row-even"><td><p>filed</p></td>
<td><p>他のファイルまたはメールボックスにコピーされた</p></td>
</tr>
<tr class="row-odd"><td><p>answered</p></td>
<td><p>返答されたもの</p></td>
</tr>
<tr class="row-even"><td><p>forwarded</p></td>
<td><p>転送された</p></td>
</tr>
<tr class="row-odd"><td><p>edited</p></td>
<td><p>ユーザによって変更された</p></td>
</tr>
<tr class="row-even"><td><p>resent</p></td>
<td><p>再送された</p></td>
</tr>
</tbody>
</table>
<p>By default, Rmail displays only visible headers. The <code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code>
class, though, uses the original headers because they are more
complete. Visible headers may be accessed explicitly if desired.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> instances offer the following methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.get_labels">
<span class="sig-name descname"><span class="pre">get_labels</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.get_labels" title="Link to this definition">¶</a></dt>
<dd><p>メッセージに付いているラベルのリストを返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.set_labels">
<span class="sig-name descname"><span class="pre">set_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.set_labels" title="Link to this definition">¶</a></dt>
<dd><p>メッセージに付いているラベルのリストを <em>labels</em> にセットします。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.add_label">
<span class="sig-name descname"><span class="pre">add_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.add_label" title="Link to this definition">¶</a></dt>
<dd><p>メッセージに付いているラベルのリストに <em>label</em> を追加します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.remove_label">
<span class="sig-name descname"><span class="pre">remove_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.remove_label" title="Link to this definition">¶</a></dt>
<dd><p>メッセージに付いているラベルのリストから <em>label</em> を削除します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.get_visible">
<span class="sig-name descname"><span class="pre">get_visible</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.get_visible" title="Link to this definition">¶</a></dt>
<dd><p>ヘッダがメッセージの可視ヘッダでありボディが空であるような <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> インスタンスを返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.set_visible">
<span class="sig-name descname"><span class="pre">set_visible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">visible</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.set_visible" title="Link to this definition">¶</a></dt>
<dd><p>メッセージの可視ヘッダを <em>visible</em> のヘッダと同じにセットします。引数 <em>visible</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> インスタンスまたは <a class="reference internal" href="email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">email.message.Message</span></code></a> インスタンス、文字列、ファイル風オブジェクト(テキストモードで開かれてなければなりません)のいずれかです。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.BabylMessage.update_visible">
<span class="sig-name descname"><span class="pre">update_visible</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.BabylMessage.update_visible" title="Link to this definition">¶</a></dt>
<dd><p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> instance's original headers are modified, the
visible headers are not automatically modified to correspond. This method
updates the visible headers as follows: each visible header with a
corresponding original header is set to the value of the original header,
each visible header without a corresponding original header is removed,
and any of <em class="mailheader">Date</em>, <em class="mailheader">From</em>, <em class="mailheader">Reply-To</em>,
<em class="mailheader">To</em>, <em class="mailheader">CC</em>, and <em class="mailheader">Subject</em> that are
present in the original headers but not the visible headers are added to
the visible headers.</p>
</dd></dl>

</dd></dl>

<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;unseen&quot; ラベル</p></td>
<td><p>S フラグ無し</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;deleted&quot; ラベル</p></td>
<td><p>T フラグ</p></td>
</tr>
<tr class="row-even"><td><p>&quot;answered&quot; ラベル</p></td>
<td><p>R フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;forwarded&quot; ラベル</p></td>
<td><p>P フラグ</p></td>
</tr>
</tbody>
</table>
<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> or <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> instance, the <em class="mailheader">Status</em>
and <em class="mailheader">X-Status</em> headers are omitted and the following conversions
take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> または <a class="reference internal" href="mailbox.html#mailbox.MMDFMessage" title="mailbox.MMDFMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;unseen&quot; ラベル</p></td>
<td><p>R フラグ無し</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;deleted&quot; ラベル</p></td>
<td><p>D フラグ</p></td>
</tr>
<tr class="row-even"><td><p>&quot;answered&quot; ラベル</p></td>
<td><p>A フラグ</p></td>
</tr>
</tbody>
</table>
<p>When a <code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&quot;unseen&quot; ラベル</p></td>
<td><p>&quot;unseen&quot; シーケンス</p></td>
</tr>
<tr class="row-odd"><td><p>&quot;answered&quot; ラベル</p></td>
<td><p>&quot;replied&quot; シーケンス</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mmdfmessage-objects">
<span id="mailbox-mmdfmessage"></span><h3><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> オブジェクト<a class="headerlink" href="mailbox.html#mmdfmessage-objects" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="mailbox.MMDFMessage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">MMDFMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage" title="Link to this definition">¶</a></dt>
<dd><p>MMDF 固有の動作をするメッセージ。引数 <em>message</em> は <a class="reference internal" href="mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> のコンストラクタと同じ意味を持ちます。</p>
<p>mbox メールボックスのメッセージと同様に、MMDF メッセージは送り主のアドレスと配送日時が最初の &quot;From &quot; で始まる行に記録されています。同様に、メッセージの状態を示すフラグは通常 <em class="mailheader">Status</em> および <em class="mailheader">X-Status</em> ヘッダに収められています。</p>
<p>よく使われる MMDF メッセージのフラグは mbox メッセージのものと同一で以下の通りです:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>意味</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R</p></td>
<td><p>読んだもの</p></td>
<td><p>読んだもの</p></td>
</tr>
<tr class="row-odd"><td><p>O</p></td>
<td><p>古い(Old)</p></td>
<td><p>以前に MUA に発見された</p></td>
</tr>
<tr class="row-even"><td><p>D</p></td>
<td><p>削除(Deleted)</p></td>
<td><p>削除予定とされたもの</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>フラグ付き(Flagged)</p></td>
<td><p>重要とされたもの</p></td>
</tr>
<tr class="row-even"><td><p>A</p></td>
<td><p>返答済み(Answered)</p></td>
<td><p>返答されたもの</p></td>
</tr>
</tbody>
</table>
<p>&quot;R&quot; および &quot;O&quot; フラグは <em class="mailheader">Status</em> ヘッダに記録され、 &quot;D&quot;、&quot;F&quot;、&quot;A&quot; フラグは <em class="mailheader">X-Status</em> ヘッダに記録されます。フラグとヘッダは通常記述された順番に出現します。</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> instances offer the following methods, which are
identical to those offered by <a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a>:</p>
<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDFMessage.get_from">
<span class="sig-name descname"><span class="pre">get_from</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage.get_from" title="Link to this definition">¶</a></dt>
<dd><p>mbox メールボックスのメッセージの開始を示す &quot;From &quot; 行を表わす文字列を返します。先頭の &quot;From &quot; および末尾の改行は含まれません。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDFMessage.set_from">
<span class="sig-name descname"><span class="pre">set_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage.set_from" title="Link to this definition">¶</a></dt>
<dd><p>Set the &quot;From &quot; line to <em>from_</em>, which should be specified without a
leading &quot;From &quot; or trailing newline. For convenience, <em>time_</em> may be
specified and will be formatted appropriately and appended to <em>from_</em>. If
<em>time_</em> is specified, it should be a <a class="reference internal" href="time.html#time.struct_time" title="time.struct_time"><code class="xref py py-class docutils literal notranslate"><span class="pre">time.struct_time</span></code></a> instance, a
tuple suitable for passing to <a class="reference internal" href="time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a>, or <code class="docutils literal notranslate"><span class="pre">True</span></code> (to use
<a class="reference internal" href="time.html#time.gmtime" title="time.gmtime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.gmtime()</span></code></a>).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDFMessage.get_flags">
<span class="sig-name descname"><span class="pre">get_flags</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage.get_flags" title="Link to this definition">¶</a></dt>
<dd><p>現在セットされているフラグを特定する文字列を返します。メッセージが規定された形式に準拠しているならば、結果は次の順に並べられた 0回か1回の <code class="docutils literal notranslate"><span class="pre">'R'</span></code>、<code class="docutils literal notranslate"><span class="pre">'O'</span></code>、<code class="docutils literal notranslate"><span class="pre">'D'</span></code>、<code class="docutils literal notranslate"><span class="pre">'F'</span></code>、<code class="docutils literal notranslate"><span class="pre">'A'</span></code> です。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDFMessage.set_flags">
<span class="sig-name descname"><span class="pre">set_flags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage.set_flags" title="Link to this definition">¶</a></dt>
<dd><p><em>flags</em> で指定されたフラグをセットして、他のフラグは下ろします。<em>flags</em> は並べられたゼロまたは1回の <code class="docutils literal notranslate"><span class="pre">'R'</span></code>、<code class="docutils literal notranslate"><span class="pre">'O'</span></code>、<code class="docutils literal notranslate"><span class="pre">'D'</span></code>、<code class="docutils literal notranslate"><span class="pre">'F'</span></code>、<code class="docutils literal notranslate"><span class="pre">'A'</span></code> です。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDFMessage.add_flag">
<span class="sig-name descname"><span class="pre">add_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage.add_flag" title="Link to this definition">¶</a></dt>
<dd><p><em>flag</em> で指定されたフラグをセットしますが他のフラグは変えません。一度に二つ以上のフラグをセットすることは、<em>flag</em> に2文字以上の文字列を指定すればできます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mailbox.MMDFMessage.remove_flag">
<span class="sig-name descname"><span class="pre">remove_flag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="mailbox.html#mailbox.MMDFMessage.remove_flag" title="Link to this definition">¶</a></dt>
<dd><p><em>flag</em> で指定されたフラグを下ろしますが他のフラグは変えません。一二つ以上のフラグを取り除くことは、<em>flag</em> に2文字以上の文字列を指定すればできます。</p>
</dd></dl>

</dd></dl>

<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> instance, a &quot;From &quot; line is generated based upon the
<a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> instance's delivery date, and the following conversions
take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MaildirMessage" title="mailbox.MaildirMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグ</p></td>
<td><p>S フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>&quot;cur&quot; サブディレクトリ</p></td>
</tr>
<tr class="row-even"><td><p>D フラグ</p></td>
<td><p>T フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>F フラグ</p></td>
<td><p>F フラグ</p></td>
</tr>
<tr class="row-even"><td><p>A フラグ</p></td>
<td><p>R フラグ</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.MHMessage" title="mailbox.MHMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグおよび O フラグ</p></td>
<td><p>&quot;unseen&quot; シーケンス無し</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>&quot;unseen&quot; シーケンス</p></td>
</tr>
<tr class="row-even"><td><p>F フラグ</p></td>
<td><p>&quot;flagged&quot; シーケンス</p></td>
</tr>
<tr class="row-odd"><td><p>A フラグ</p></td>
<td><p>&quot;replied&quot; シーケンス</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> instance is created based upon a
<a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> instance, the following conversions take place:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.BabylMessage" title="mailbox.BabylMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグおよび O フラグ</p></td>
<td><p>&quot;unseen&quot; ラベル無し</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>&quot;unseen&quot; ラベル</p></td>
</tr>
<tr class="row-even"><td><p>D フラグ</p></td>
<td><p>&quot;deleted&quot; ラベル</p></td>
</tr>
<tr class="row-odd"><td><p>A フラグ</p></td>
<td><p>&quot;answered&quot; ラベル</p></td>
</tr>
</tbody>
</table>
<p>When an <code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> instance is created based upon an
<a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> instance, the &quot;From &quot; line is copied and all flags directly
correspond:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>結果の状態</p></th>
<th class="head"><p><a class="reference internal" href="mailbox.html#mailbox.mboxMessage" title="mailbox.mboxMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code></a> の状態</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R フラグ</p></td>
<td><p>R フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>O フラグ</p></td>
<td><p>O フラグ</p></td>
</tr>
<tr class="row-even"><td><p>D フラグ</p></td>
<td><p>D フラグ</p></td>
</tr>
<tr class="row-odd"><td><p>F フラグ</p></td>
<td><p>F フラグ</p></td>
</tr>
<tr class="row-even"><td><p>A フラグ</p></td>
<td><p>A フラグ</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="exceptions">
<h2>例外<a class="headerlink" href="mailbox.html#exceptions" title="Link to this heading">¶</a></h2>
<p>The following exception classes are defined in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code> module:</p>
<dl class="py exception">
<dt class="sig sig-object py" id="mailbox.Error">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">Error</span></span><a class="headerlink" href="mailbox.html#mailbox.Error" title="Link to this definition">¶</a></dt>
<dd><p>他の全てのモジュール固有の例外の基底クラス。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="mailbox.NoSuchMailboxError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">NoSuchMailboxError</span></span><a class="headerlink" href="mailbox.html#mailbox.NoSuchMailboxError" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスがあると思っていたが見つからなかった場合に送出されます。これはたとえば <a class="reference internal" href="mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code></a> のサブクラスを存在しないパスでインスタンス化しようとしたとき(かつ <em>create</em> パラメータは <code class="docutils literal notranslate"><span class="pre">False</span></code> であった場合)、あるいは存在しないフォルダを開こうとした時などに発生します。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="mailbox.NotEmptyError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">NotEmptyError</span></span><a class="headerlink" href="mailbox.html#mailbox.NotEmptyError" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスが空であることを期待されているときに空でない場合、たとえばメッセージの残っているフォルダを削除しようとした時などに送出されます。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="mailbox.ExternalClashError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">ExternalClashError</span></span><a class="headerlink" href="mailbox.html#mailbox.ExternalClashError" title="Link to this definition">¶</a></dt>
<dd><p>メールボックスに関係したある条件がプログラムの制御を外れてそれ以上作業を続けられなくなった場合、たとえば他のプログラムが既に保持しているロックを取得しようとして失敗したとき、あるいは一意的に生成されたファイル名が既に存在していた場合などに送出されます。</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="mailbox.FormatError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mailbox.</span></span><span class="sig-name descname"><span class="pre">FormatError</span></span><a class="headerlink" href="mailbox.html#mailbox.FormatError" title="Link to this definition">¶</a></dt>
<dd><p>ファイル中のデータが解析できない場合、たとえば <a class="reference internal" href="mailbox.html#mailbox.MH" title="mailbox.MH"><code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code></a> インスタンスが壊れた <code class="file docutils literal notranslate"><span class="pre">.mh_sequences</span></code> ファイルを読もうと試みた場合などに送出されます。</p>
</dd></dl>

</section>
<section id="examples">
<span id="mailbox-examples"></span><h2>使用例<a class="headerlink" href="mailbox.html#examples" title="Link to this heading">¶</a></h2>
<p>メールボックス中の面白そうなメッセージのサブジェクトを全て印字する簡単な例:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mailbox</span>
<span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">mailbox</span><span class="o">.</span><span class="n">mbox</span><span class="p">(</span><span class="s1">&#39;~/mbox&#39;</span><span class="p">):</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s1">&#39;subject&#39;</span><span class="p">]</span>       <span class="c1"># Could possibly be None.</span>
    <span class="k">if</span> <span class="n">subject</span> <span class="ow">and</span> <span class="s1">&#39;python&#39;</span> <span class="ow">in</span> <span class="n">subject</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span>
</pre></div>
</div>
<p>Babyl メールボックスから MH メールボックスへ全てのメールをコピーし、変換可能な全ての形式固有の情報を変換する:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mailbox</span>
<span class="n">destination</span> <span class="o">=</span> <span class="n">mailbox</span><span class="o">.</span><span class="n">MH</span><span class="p">(</span><span class="s1">&#39;~/Mail&#39;</span><span class="p">)</span>
<span class="n">destination</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
<span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">mailbox</span><span class="o">.</span><span class="n">Babyl</span><span class="p">(</span><span class="s1">&#39;~/RMAIL&#39;</span><span class="p">):</span>
    <span class="n">destination</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mailbox</span><span class="o">.</span><span class="n">MHMessage</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
<span class="n">destination</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<span class="n">destination</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
</pre></div>
</div>
<p>この例は幾つかのメーリングリストのメールをソートするものです。他のプログラムと平行して変更を加えることでメールが破損したり、プログラムを中断することでメールを失ったり、はたまた半端なメッセージがメールボックス中にあることで途中で終了してしまう、といったことを避けるように注意深く扱っています:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mailbox</span>
<span class="kn">import</span> <span class="nn">email.errors</span>

<span class="n">list_names</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;python-list&#39;</span><span class="p">,</span> <span class="s1">&#39;python-dev&#39;</span><span class="p">,</span> <span class="s1">&#39;python-bugs&#39;</span><span class="p">)</span>

<span class="n">boxes</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">mailbox</span><span class="o">.</span><span class="n">mbox</span><span class="p">(</span><span class="s1">&#39;~/email/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">list_names</span><span class="p">}</span>
<span class="n">inbox</span> <span class="o">=</span> <span class="n">mailbox</span><span class="o">.</span><span class="n">Maildir</span><span class="p">(</span><span class="s1">&#39;~/Maildir&#39;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">inbox</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">inbox</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">except</span> <span class="n">email</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">MessageParseError</span><span class="p">:</span>
        <span class="k">continue</span>                <span class="c1"># The message is malformed. Just leave it.</span>

    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">list_names</span><span class="p">:</span>
        <span class="n">list_id</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s1">&#39;list-id&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">list_id</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">list_id</span><span class="p">:</span>
            <span class="c1"># Get mailbox to use</span>
            <span class="n">box</span> <span class="o">=</span> <span class="n">boxes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

            <span class="c1"># Write copy to disk before removing original.</span>
            <span class="c1"># If there&#39;s a crash, you might duplicate a message, but</span>
            <span class="c1"># that&#39;s better than losing a message completely.</span>
            <span class="n">box</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
            <span class="n">box</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="n">box</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">box</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>

            <span class="c1"># Remove original message</span>
            <span class="n">inbox</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
            <span class="n">inbox</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="n">inbox</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">inbox</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
            <span class="k">break</span>               <span class="c1"># Found destination, so stop looking.</span>

<span class="k">for</span> <span class="n">box</span> <span class="ow">in</span> <span class="n">boxes</span><span class="o">.</span><span class="n">itervalues</span><span class="p">():</span>
    <span class="n">box</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="mailbox.html#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code> --- 様々な形式のメールボックスを操作する</a><ul>
<li><a class="reference internal" href="mailbox.html#mailbox-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mailbox</span></code> オブジェクト</a><ul>
<li><a class="reference internal" href="mailbox.html#maildir-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mbox-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">mbox</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mh-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MH</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#babyl-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Babyl</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mmdf-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDF</span></code> オブジェクト</a></li>
</ul>
</li>
<li><a class="reference internal" href="mailbox.html#message-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> オブジェクト</a><ul>
<li><a class="reference internal" href="mailbox.html#maildirmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaildirMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mboxmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">mboxMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mhmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MHMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#babylmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">BabylMessage</span></code> オブジェクト</a></li>
<li><a class="reference internal" href="mailbox.html#mmdfmessage-objects"><code class="xref py py-class docutils literal notranslate"><span class="pre">MMDFMessage</span></code> オブジェクト</a></li>
</ul>
</li>
<li><a class="reference internal" href="mailbox.html#exceptions">例外</a></li>
<li><a class="reference internal" href="mailbox.html#examples">使用例</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="json.html"
                          title="前の章へ"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> --- JSON エンコーダーとデコーダー</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="mimetypes.html"
                          title="次の章へ"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mimetypes</span></code> --- ファイル名を MIME タイプへマップする</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">バグ報告</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/main/Doc/library/mailbox.rst"
            rel="nofollow">ソースの表示
        </a>
      </li>
    </ul>
  </div>
        </div>
<div id="sidebarbutton" title="サイドバーをたたむ">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="mimetypes.html" title="mimetypes --- ファイル名を MIME タイプへマップする"
             >次へ</a> |</li>
        <li class="right" >
          <a href="json.html" title="json --- JSON エンコーダーとデコーダー"
             >前へ</a> |</li>

          <li><img src="../_static/py.svg" alt="Python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.12.4 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Python 標準ライブラリ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" >インターネット上のデータの操作</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="mailbox.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code> --- 様々な形式のメールボックスを操作する</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="クイック検索" aria-label="クイック検索" type="search" name="q" id="search-box" />
          <input type="submit" value="検索" />
        </form>
    </div>
                     |
                </li>
            <li class="right">
<label class="theme-selector-label">
    Theme
    <select class="theme-selector" oninput="activateTheme(this.value)">
        <option value="auto" selected>Auto</option>
        <option value="light">Light</option>
        <option value="dark">Dark</option>
    </select>
</label> |</li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; 
      <a href="../copyright.html">
    
    Copyright
    
      </a>
     2001-2024, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    
      See <a href="../../../license.html">History and License</a> for more information.<br />
    
    
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />
      最終更新: Jun 11, 2024 (04:44 UTC)
    
      <a href="../../../bugs.html">Found a bug</a>?
    
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>

    <script type="text/javascript" src="../_static/switchers.js"></script>
  </body>
</html>